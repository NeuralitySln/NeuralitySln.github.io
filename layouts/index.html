{{ define "main" }}
  <!-- Sophisticated Background Banner -->
  {{ with .Params.banner }}
    <section class="hero-banner" {{ if .image }}style="background-image: linear-gradient(135deg, rgba(10, 27, 61, 0.85) 0%, rgba(0, 0, 0, 0.4) 50%, rgba(10, 27, 61, 0.7) 100%), url('{{ .image | absURL }}');"{{ end }}>
      <div class="hero-overlay">
        <div class="container">
          <div class="row justify-center">
            <div class="lg:col-8 md:col-10 text-center hero-content">
              <h1 class="hero-title">
                {{ .title | markdownify }}
              </h1>
              <p class="hero-subtitle">
                {{ .content | markdownify }}
              </p>
              {{ with .button }}
                {{ if .enable }}
                  <a
                    class="btn btn-primary hero-btn"
                    href="{{ .link | absURL }}"
                    {{ if strings.HasPrefix .link `http` }}
                      target="_blank" rel="noopener"
                    {{ end }}>
                    {{ .label }}
                    <i class="fa fa-arrow-right pl-2"></i>
                  </a>
                {{ end }}
              {{ end }}
            </div>
          </div>
        </div>
      </div>
    </section>
  {{ end }}
  <!-- /Banner -->

  <!-- Technology Gallery Section -->
  {{ if .Params.gallery_section }}
    <section class="section gallery-section">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-12">
            <h2 class="section-title">{{ .Params.gallery_section.title }}</h2>
            <p class="section-subtitle">{{ .Params.gallery_section.content }}</p>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <!-- Gallery Grid -->
            {{ with .Resources.ByType "image" }}
              <!-- Load Lightbox2 CSS and JS -->
              <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" />
              <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
              <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox.min.js"></script>

              <div class="gallery-container">
                <div class="gallery-grid">
                  {{ range . }}
                    {{ $thumb := .Resize "350x260 q80 Box" }}
                    <div class="gallery-item">
                      <a href="{{ .Permalink }}" data-lightbox="tech-gallery" data-title="{{ .Name | humanize | title }}">
                        <img src="{{ $thumb.Permalink }}" alt="{{ .Name | humanize | title }}" class="gallery-thumb" loading="lazy" />
                        <div class="gallery-overlay">
                          <i class="fa fa-search-plus"></i>
                        </div>
                      </a>
                      <div class="gallery-caption">
                        <h4>{{ .Name | humanize | title }}</h4>
                      </div>
                    </div>
                  {{ end }}
                </div>
              </div>
            {{ end }}
          </div>
        </div>
      </div>
    </section>
  {{ end }}

  <!-- Features as Secondary Content -->
  {{ if .Params.features }}
    <section class="section features-overview">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-12">
            <h2 class="section-title">Our Technology</h2>
            <p class="section-subtitle">Key innovations driving our muscle signal processing platform</p>
          </div>
        </div>
        <div class="features-grid">
          {{ range .Params.features }}
            <div class="feature-card">
              {{ if .image }}
                <div class="feature-image">
                  {{ partial "image" (dict "Src" .image "Alt" .title "DisplayXL" "400x" "DisplayLG" "350x" "DisplayMD" "300x") }}
                </div>
              {{ end }}
              <div class="feature-content">
                <h3>{{ .title | markdownify }}</h3>
                <p>{{ .content | markdownify }}</p>
                {{ if .bulletpoints }}
                  <ul class="feature-points">
                    {{ range .bulletpoints }}
                      <li>{{ . | markdownify }}</li>
                    {{ end }}
                  </ul>
                {{ end }}
              </div>
            </div>
          {{ end }}
        </div>
      </div>
    </section>
  {{ end }}
  <!-- /Features -->

  <style>
    /* Dark Mode Support */
    :root {
      --ns-primary: #0A1B3D;
      --ns-accent: #00E0FF;
      --ns-secondary: #8A94A4;
      --ns-background: #F9FAFB;
      --ns-text-dark: #2D3748;
      --ns-text-light: #FFFFFF;
      --ns-card-bg: #FFFFFF;
      --ns-section-bg-even: rgba(248, 250, 252, 0.6);
      --ns-section-bg-odd: rgba(255, 255, 255, 0.8);
    }
    
         @media (prefers-color-scheme: dark) {
       :root {
         --ns-background: #0A0A12;
         --ns-text-dark: #E2E8F0;
         --ns-text-light: #FFFFFF;
         --ns-card-bg: #1A202C;
         --ns-section-bg-even: rgba(15, 20, 35, 0.95);
         --ns-section-bg-odd: rgba(20, 26, 38, 0.9);
         --ns-secondary: #A0AEC0;
       }
       
       body {
         background-color: var(--ns-background);
         color: var(--ns-text-dark);
       }
     }
    
         [data-theme="dark"] {
       --ns-background: #0A0A12;
       --ns-text-dark: #E2E8F0;
       --ns-text-light: #FFFFFF;
       --ns-card-bg: #1A202C;
       --ns-section-bg-even: rgba(15, 20, 35, 0.95);
       --ns-section-bg-odd: rgba(20, 26, 38, 0.9);
       --ns-secondary: #A0AEC0;
     }
     
     [data-theme="dark"] body {
       background-color: var(--ns-background);
       color: var(--ns-text-dark);
     }
    
         /* Hero Banner Styling */
     .hero-banner {
       min-height: 100vh;
       background-size: 110% auto;
       background-position: right center;
       background-repeat: no-repeat;
       background-attachment: fixed;
       position: relative;
       display: flex;
       align-items: center;
     }
    
    .hero-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        135deg, 
        rgba(10, 27, 61, 0.85) 0%, 
        rgba(0, 0, 0, 0.3) 50%, 
        rgba(10, 27, 61, 0.7) 100%
      );
      display: flex;
      align-items: center;
      z-index: 1;
    }
    
    .hero-content {
      position: relative;
      z-index: 2;
      padding: 4rem 0;
    }
    
    .hero-title {
      font-size: 4rem;
      font-weight: 700;
      color: white;
      margin-bottom: 2rem;
      line-height: 1.2;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    
    .hero-subtitle {
      font-size: 1.4rem;
      color: rgba(255, 255, 255, 0.95);
      margin-bottom: 3rem;
      line-height: 1.6;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    .hero-btn {
      font-size: 1.1rem;
      padding: 1rem 2.5rem;
      background: linear-gradient(45deg, var(--ns-accent), var(--ns-primary));
      border: none;
      border-radius: 8px;
      box-shadow: 0 8px 25px rgba(0, 224, 255, 0.3);
      transition: all 0.3s ease;
    }
    
    .hero-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(0, 224, 255, 0.4);
    }
    
    /* Gallery Section */
    .gallery-section {
      background: var(--ns-section-bg-even);
      padding: 5rem 0;
      transition: all 0.3s ease;
    }
    
    .gallery-container {
      margin: 3rem 0;
    }
    
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 2rem;
      padding: 1rem 0;
    }
    
    .gallery-item {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(10, 27, 61, 0.1);
      transition: all 0.3s ease;
      background: var(--ns-card-bg);
    }
    
    .gallery-item:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 50px rgba(10, 27, 61, 0.2);
    }
    
    .gallery-thumb {
      width: 100%;
      height: 260px;
      object-fit: cover;
      transition: all 0.3s ease;
    }
    
    .gallery-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(10, 27, 61, 0.85), rgba(0, 224, 255, 0.7));
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .gallery-item:hover .gallery-overlay {
      opacity: 1;
    }
    
    .gallery-item:hover .gallery-thumb {
      transform: scale(1.05);
    }
    
    .gallery-overlay i {
      color: white;
      font-size: 2.5rem;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    .gallery-caption {
      padding: 1.5rem;
      text-align: center;
    }
    
    .gallery-caption h4 {
      color: var(--ns-text-dark);
      font-size: 1.1rem;
      font-weight: 600;
      margin: 0;
    }
    
    .section-title {
      font-size: 3rem;
      font-weight: 700;
      color: var(--ns-primary);
      margin-bottom: 1rem;
    }
    
    .section-subtitle {
      font-size: 1.2rem;
      color: var(--ns-secondary);
      max-width: 600px;
      margin: 0 auto;
    }
    
    /* Features Overview */
    .features-overview {
      padding: 5rem 0;
      background: var(--ns-section-bg-odd);
      transition: all 0.3s ease;
    }
    
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 3rem;
      margin-top: 3rem;
    }
    
    .feature-card {
      background: var(--ns-card-bg);
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(10, 27, 61, 0.08);
      transition: all 0.3s ease;
      border-left: 4px solid var(--ns-accent);
    }
    
    .feature-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 50px rgba(10, 27, 61, 0.15);
    }
    
    .feature-image {
      margin-bottom: 1.5rem;
      border-radius: 12px;
      overflow: hidden;
    }
    
    .feature-image img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      transition: all 0.3s ease;
    }
    
    .feature-card:hover .feature-image img {
      transform: scale(1.05);
    }
    
    .feature-content h3 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--ns-primary);
      margin-bottom: 1rem;
    }
    
    .feature-content p {
      color: var(--ns-text-dark);
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }
    
    .feature-points {
      list-style: none;
      padding: 0;
    }
    
    .feature-points li {
      position: relative;
      padding-left: 1.5rem;
      margin-bottom: 0.8rem;
      color: var(--ns-text-dark);
    }
    
    .feature-points li::before {
      content: 'â– ';
      position: absolute;
      left: 0;
      color: var(--ns-accent);
      font-weight: normal;
      font-size: 0.8rem;
    }
    
    /* Mobile Responsive */
         @media (max-width: 768px) {
       .hero-banner {
         background-attachment: scroll;
         background-size: 130% auto;
         background-position: 60% center;
         background-repeat: no-repeat;
         min-height: 80vh;
       }
      
      .hero-title {
        font-size: 2.5rem;
      }
      
      .hero-subtitle {
        font-size: 1.1rem;
      }
      
      .section-title {
        font-size: 2rem;
      }
      
      .gallery-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
      }
      
      .gallery-thumb {
        height: 200px;
      }
      
      .gallery-caption {
        padding: 1rem;
      }
      
      .features-grid {
        grid-template-columns: 1fr;
        gap: 2rem;
      }
      
      .feature-card {
        padding: 1.5rem;
      }
    }
    
         /* Dark Mode Specific Enhancements */
     @media (prefers-color-scheme: dark) {
       .hero-overlay {
         background: linear-gradient(
           135deg, 
           rgba(10, 27, 61, 0.9) 0%, 
           rgba(0, 0, 0, 0.5) 50%, 
           rgba(10, 27, 61, 0.8) 100%
         );
       }
       
       .gallery-section {
         background: linear-gradient(135deg, 
           rgba(10, 15, 25, 0.98) 0%, 
           rgba(15, 20, 35, 0.95) 50%, 
           rgba(20, 26, 38, 0.92) 100%) !important;
       }
       
       .gallery-item {
         background: rgba(26, 32, 44, 0.95) !important;
         box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6) !important;
         border: 1px solid rgba(0, 224, 255, 0.15) !important;
       }
       
       .gallery-item:hover {
         background: rgba(26, 32, 44, 1) !important;
         box-shadow: 0 25px 60px rgba(0, 0, 0, 0.8) !important;
         border: 1px solid rgba(0, 224, 255, 0.4) !important;
       }
       
       .gallery-caption h4 {
         color: #E2E8F0 !important;
       }
       
       .feature-card {
         background: rgba(26, 32, 44, 0.95) !important;
         box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
       }
       
       .section-title {
         color: #E2E8F0 !important;
       }
       
       .section-subtitle {
         color: #A0AEC0 !important;
       }
     }
    
         [data-theme="dark"] .hero-overlay {
       background: linear-gradient(
         135deg, 
         rgba(10, 27, 61, 0.9) 0%, 
         rgba(0, 0, 0, 0.5) 50%, 
         rgba(10, 27, 61, 0.8) 100%
       );
     }
     
     [data-theme="dark"] .gallery-section {
       background: linear-gradient(135deg, 
         rgba(10, 15, 25, 0.98) 0%, 
         rgba(15, 20, 35, 0.95) 50%, 
         rgba(20, 26, 38, 0.92) 100%) !important;
     }
     
     [data-theme="dark"] .gallery-item {
       background: rgba(26, 32, 44, 0.95) !important;
       box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6) !important;
       border: 1px solid rgba(0, 224, 255, 0.15) !important;
     }
     
     [data-theme="dark"] .gallery-item:hover {
       background: rgba(26, 32, 44, 1) !important;
       box-shadow: 0 25px 60px rgba(0, 0, 0, 0.8) !important;
       border: 1px solid rgba(0, 224, 255, 0.4) !important;
     }
     
     [data-theme="dark"] .gallery-caption h4 {
       color: #E2E8F0 !important;
     }
     
     [data-theme="dark"] .feature-card {
       background: rgba(26, 32, 44, 0.95) !important;
       box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
     }
     
     [data-theme="dark"] .section-title {
       color: #E2E8F0 !important;
     }
     
     [data-theme="dark"] .section-subtitle {
       color: #A0AEC0 !important;
     }
  </style>
{{ end }}
